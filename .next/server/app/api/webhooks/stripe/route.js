"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/webhooks/stripe/route";
exports.ids = ["app/api/webhooks/stripe/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fstripe%2Froute&page=%2Fapi%2Fwebhooks%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fstripe%2Froute&page=%2Fapi%2Fwebhooks%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_beatr_Downloads_uvpayment_app_api_webhooks_stripe_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/webhooks/stripe/route.ts */ \"(rsc)/./app/api/webhooks/stripe/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/webhooks/stripe/route\",\n        pathname: \"/api/webhooks/stripe\",\n        filename: \"route\",\n        bundlePath: \"app/api/webhooks/stripe/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\beatr\\\\Downloads\\\\uvpayment\\\\app\\\\api\\\\webhooks\\\\stripe\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_beatr_Downloads_uvpayment_app_api_webhooks_stripe_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/webhooks/stripe/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3ZWJob29rcyUyRnN0cmlwZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGd2ViaG9va3MlMkZzdHJpcGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ3ZWJob29rcyUyRnN0cmlwZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNiZWF0ciU1Q0Rvd25sb2FkcyU1Q3V2cGF5bWVudCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDYmVhdHIlNUNEb3dubG9hZHMlNUN1dnBheW1lbnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzRCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXZwYXltZW50Lz9kOTE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGJlYXRyXFxcXERvd25sb2Fkc1xcXFx1dnBheW1lbnRcXFxcYXBwXFxcXGFwaVxcXFx3ZWJob29rc1xcXFxzdHJpcGVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3dlYmhvb2tzL3N0cmlwZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3dlYmhvb2tzL3N0cmlwZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvd2ViaG9va3Mvc3RyaXBlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYmVhdHJcXFxcRG93bmxvYWRzXFxcXHV2cGF5bWVudFxcXFxhcHBcXFxcYXBpXFxcXHdlYmhvb2tzXFxcXHN0cmlwZVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvd2ViaG9va3Mvc3RyaXBlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fstripe%2Froute&page=%2Fapi%2Fwebhooks%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/webhooks/stripe/route.ts":
/*!******************************************!*\
  !*** ./app/api/webhooks/stripe/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   config: () => (/* binding */ config)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nif (!process.env.STRIPE_SECRET_KEY) {\n    throw new Error(\"STRIPE_SECRET_KEY is not configured\");\n}\nif (!process.env.STRIPE_WEBHOOK_SECRET) {\n    throw new Error(\"STRIPE_WEBHOOK_SECRET is not configured\");\n}\nconst stripe = new stripe__WEBPACK_IMPORTED_MODULE_1__[\"default\"](process.env.STRIPE_SECRET_KEY, {\n    apiVersion: \"2023-10-16\"\n});\nasync function POST(req) {\n    console.log(\"\\n========== \\uD83D\\uDD14 WEBHOOK REQUEST RECEIVED ==========\");\n    const body = await req.text();\n    const signature = req.headers.get(\"stripe-signature\");\n    console.log(\"Has signature:\", !!signature);\n    console.log(\"Body length:\", body.length);\n    if (!signature) {\n        console.error(\"âŒ Missing Stripe signature\");\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Missing signature\", {\n            status: 400\n        });\n    }\n    let event;\n    try {\n        console.log(\"\\uD83D\\uDD10 Verifying webhook signature...\");\n        event = stripe.webhooks.constructEvent(body, signature, process.env.STRIPE_WEBHOOK_SECRET);\n        console.log(\"âœ… Signature verified successfully!\");\n    } catch (err) {\n        const message = err instanceof Error ? err.message : \"Unknown error\";\n        console.error(\"âŒ Webhook signature verification failed:\", message);\n        console.error(\"Error details:\", err);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(`Webhook Error: ${message}`, {\n            status: 400\n        });\n    }\n    if (!_lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin) {\n        console.error(\"Supabase admin client not configured\");\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Server configuration error\", {\n            status: 500\n        });\n    }\n    try {\n        console.log(\"\\n========== \\uD83D\\uDCB3 STRIPE WEBHOOK RECEIVED ==========\");\n        console.log(\"Event Type:\", event.type);\n        console.log(\"Event ID:\", event.id);\n        // Handle successful checkout\n        if (event.type === \"checkout.session.completed\") {\n            console.log(\"\\nâœ… CHECKOUT COMPLETED!\");\n            const session = event.data.object;\n            const userId = session.metadata?.userId;\n            const customerId = session.customer;\n            console.log(\"User ID from metadata:\", userId);\n            console.log(\"Customer ID:\", customerId);\n            console.log(\"Session Details:\", JSON.stringify(session, null, 2));\n            if (!userId) {\n                console.error(\"âŒ CRITICAL: No userId in checkout session metadata\");\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    received: true,\n                    warning: \"No userId found\"\n                });\n            }\n            console.log(`\\nðŸ“ Updating user ${userId} to subscriber...`);\n            // First check if the profile exists\n            const { data: existingProfile, error: checkError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").select(\"*\").eq(\"id\", userId).single();\n            if (checkError) {\n                console.error(\"âŒ ERROR FINDING USER:\", checkError);\n                console.error(\"User ID that failed:\", userId);\n                // Try to find by stripe_customer_id as fallback\n                console.log(\"\\uD83D\\uDD04 Trying to find user by stripe_customer_id...\");\n                const { data: fallbackProfile, error: fallbackError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").select(\"*\").eq(\"stripe_customer_id\", customerId).single();\n                if (!fallbackError && fallbackProfile) {\n                    console.log(\"âœ… Found user by customer ID!\");\n                    // Update using customer ID\n                    const { data: updatedData, error: updateError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").update({\n                        role: \"subscriber\",\n                        subscription_status: \"active\"\n                    }).eq(\"stripe_customer_id\", customerId).select();\n                    if (updateError) {\n                        console.error(\"âŒ UPDATE FAILED:\", updateError);\n                        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Database update failed\", {\n                            status: 500\n                        });\n                    }\n                    console.log(\"âœ… USER UPGRADED SUCCESSFULLY (via customer ID)!\");\n                    console.log(\"Updated Profile:\", JSON.stringify(updatedData, null, 2));\n                    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                        received: true\n                    });\n                }\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"User not found\", {\n                    status: 500\n                });\n            }\n            console.log(\"âœ… User found:\", existingProfile.id);\n            // Upgrade user to subscriber\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").update({\n                role: \"subscriber\",\n                subscription_status: \"active\",\n                stripe_customer_id: customerId\n            }).eq(\"id\", userId).select();\n            if (error) {\n                console.error(\"âŒ DATABASE UPDATE FAILED:\", error);\n                console.error(\"Error Code:\", error.code);\n                console.error(\"Error Message:\", error.message);\n                console.error(\"Error Details:\", JSON.stringify(error, null, 2));\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Database update failed\", {\n                    status: 500\n                });\n            }\n            console.log(\"âœ… USER UPGRADED SUCCESSFULLY!\");\n            console.log(\"Updated Profile:\", JSON.stringify(data, null, 2));\n            console.log(`ðŸŽ‰ User ${userId} is now a SUBSCRIBER!`);\n        }\n        // Handle subscription deletion/cancellation\n        if (event.type === \"customer.subscription.deleted\") {\n            const subscription = event.data.object;\n            const customerId = subscription.customer;\n            if (!customerId) {\n                console.error(\"No customerId in subscription.deleted event\");\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    received: true,\n                    warning: \"No customerId found\"\n                });\n            }\n            // Downgrade user to guest\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").update({\n                role: \"guest\",\n                subscription_status: \"inactive\"\n            }).eq(\"stripe_customer_id\", customerId);\n            if (error) {\n                console.error(\"Error downgrading profile after subscription deletion:\", error);\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Database update failed\", {\n                    status: 500\n                });\n            }\n            console.log(`Customer ${customerId} downgraded to guest`);\n        }\n        // Handle subscription updates (optional but recommended)\n        if (event.type === \"customer.subscription.updated\") {\n            const subscription = event.data.object;\n            const customerId = subscription.customer;\n            const status = subscription.status;\n            let subscriptionStatus = \"inactive\";\n            let role = \"guest\";\n            // Map Stripe status to our database status\n            if (status === \"active\") {\n                subscriptionStatus = \"active\";\n                role = \"subscriber\";\n            } else if (status === \"past_due\") {\n                subscriptionStatus = \"past_due\";\n                role = \"subscriber\"; // Keep access during grace period\n            } else if (status === \"canceled\" || status === \"unpaid\") {\n                subscriptionStatus = \"canceled\";\n                role = \"guest\";\n            }\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from(\"profiles\").update({\n                role,\n                subscription_status: subscriptionStatus\n            }).eq(\"stripe_customer_id\", customerId);\n            if (error) {\n                console.error(\"Error updating subscription status:\", error);\n            } else {\n                console.log(`Customer ${customerId} subscription updated to ${status}`);\n            }\n        }\n    } catch (error) {\n        const message = error instanceof Error ? error.message : \"Unknown error\";\n        console.error(\"\\nâŒ WEBHOOK HANDLING ERROR!\");\n        console.error(\"Error Message:\", message);\n        console.error(\"Error Stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        console.error(\"Full Error:\", JSON.stringify(error, null, 2));\n        // Return 200 anyway to prevent Stripe from retrying failed webhooks\n        // Log the error for manual intervention\n        console.error(\"âš ï¸ WARNING: Webhook failed but returning 200 to prevent retries\");\n        console.error(\"\\uD83D\\uDD27 MANUAL ACTION NEEDED: Check logs and update user manually if needed\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            received: true,\n            error: message,\n            requiresManualIntervention: true\n        });\n    }\n    console.log(\"========== âœ… WEBHOOK PROCESSED SUCCESSFULLY ==========\\n\");\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        received: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQ3ZELE9BQU87Z0JBQ0xSLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRXFCLFdBQVcseUJBQXlCLEVBQUViLE9BQU8sQ0FBQztZQUN4RTtRQUNGO0lBQ0YsRUFBRSxPQUFPRCxPQUFPO1FBQ2QsTUFBTU0sVUFBVU4saUJBQWlCZCxRQUFRYyxNQUFNTSxPQUFPLEdBQUc7UUFDekRkLFFBQVFRLEtBQUssQ0FBQztRQUNkUixRQUFRUSxLQUFLLENBQUMsa0JBQWtCTTtRQUNoQ2QsUUFBUVEsS0FBSyxDQUFDLGdCQUFnQkEsaUJBQWlCZCxRQUFRYyxNQUFNc0MsS0FBSyxHQUFHO1FBQ3JFOUMsUUFBUVEsS0FBSyxDQUFDLGVBQWVnQixLQUFLQyxTQUFTLENBQUNqQixPQUFPLE1BQU07UUFFekQsb0VBQW9FO1FBQ3BFLHdDQUF3QztRQUN4Q1IsUUFBUVEsS0FBSyxDQUFDO1FBQ2RSLFFBQVFRLEtBQUssQ0FBQztRQUVkLE9BQU92QixxREFBWUEsQ0FBQ3lDLElBQUksQ0FBQztZQUN2QkMsVUFBVTtZQUNWbkIsT0FBT007WUFDUGlDLDRCQUE0QjtRQUM5QjtJQUNGO0lBRUEvQyxRQUFRQyxHQUFHLENBQUM7SUFDWixPQUFPaEIscURBQVlBLENBQUN5QyxJQUFJLENBQUM7UUFBRUMsVUFBVTtJQUFLO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXZwYXltZW50Ly4vYXBwL2FwaS93ZWJob29rcy9zdHJpcGUvcm91dGUudHM/NTVkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgU3RyaXBlIGZyb20gJ3N0cmlwZSc7XG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcbiAgfSxcbn07XG5cbmlmICghcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdTVFJJUEVfU0VDUkVUX0tFWSBpcyBub3QgY29uZmlndXJlZCcpO1xufVxuXG5pZiAoIXByb2Nlc3MuZW52LlNUUklQRV9XRUJIT09LX1NFQ1JFVCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1NUUklQRV9XRUJIT09LX1NFQ1JFVCBpcyBub3QgY29uZmlndXJlZCcpO1xufVxuXG5jb25zdCBzdHJpcGUgPSBuZXcgU3RyaXBlKHByb2Nlc3MuZW52LlNUUklQRV9TRUNSRVRfS0VZLCB7XG4gIGFwaVZlcnNpb246ICcyMDIzLTEwLTE2Jyxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgY29uc29sZS5sb2coJ1xcbj09PT09PT09PT0g8J+UlCBXRUJIT09LIFJFUVVFU1QgUkVDRUlWRUQgPT09PT09PT09PScpO1xuXG4gIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEudGV4dCgpO1xuICBjb25zdCBzaWduYXR1cmUgPSByZXEuaGVhZGVycy5nZXQoJ3N0cmlwZS1zaWduYXR1cmUnKTtcblxuICBjb25zb2xlLmxvZygnSGFzIHNpZ25hdHVyZTonLCAhIXNpZ25hdHVyZSk7XG4gIGNvbnNvbGUubG9nKCdCb2R5IGxlbmd0aDonLCBib2R5Lmxlbmd0aCk7XG5cbiAgaWYgKCFzaWduYXR1cmUpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgTWlzc2luZyBTdHJpcGUgc2lnbmF0dXJlJyk7XG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ01pc3Npbmcgc2lnbmF0dXJlJywgeyBzdGF0dXM6IDQwMCB9KTtcbiAgfVxuXG4gIGxldCBldmVudDogU3RyaXBlLkV2ZW50O1xuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflJAgVmVyaWZ5aW5nIHdlYmhvb2sgc2lnbmF0dXJlLi4uJyk7XG4gICAgZXZlbnQgPSBzdHJpcGUud2ViaG9va3MuY29uc3RydWN0RXZlbnQoYm9keSwgc2lnbmF0dXJlLCBwcm9jZXNzLmVudi5TVFJJUEVfV0VCSE9PS19TRUNSRVQhKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFNpZ25hdHVyZSB2ZXJpZmllZCBzdWNjZXNzZnVsbHkhJyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBXZWJob29rIHNpZ25hdHVyZSB2ZXJpZmljYXRpb24gZmFpbGVkOicsIG1lc3NhZ2UpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRldGFpbHM6JywgZXJyKTtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShgV2ViaG9vayBFcnJvcjogJHttZXNzYWdlfWAsIHsgc3RhdHVzOiA0MDAgfSk7XG4gIH1cblxuICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBhZG1pbiBjbGllbnQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZSgnU2VydmVyIGNvbmZpZ3VyYXRpb24gZXJyb3InLCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnXFxuPT09PT09PT09PSDwn5KzIFNUUklQRSBXRUJIT09LIFJFQ0VJVkVEID09PT09PT09PT0nKTtcbiAgICBjb25zb2xlLmxvZygnRXZlbnQgVHlwZTonLCBldmVudC50eXBlKTtcbiAgICBjb25zb2xlLmxvZygnRXZlbnQgSUQ6JywgZXZlbnQuaWQpO1xuXG4gICAgLy8gSGFuZGxlIHN1Y2Nlc3NmdWwgY2hlY2tvdXRcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2NoZWNrb3V0LnNlc3Npb24uY29tcGxldGVkJykge1xuICAgICAgY29uc29sZS5sb2coJ1xcbuKchSBDSEVDS09VVCBDT01QTEVURUQhJyk7XG4gICAgICBjb25zdCBzZXNzaW9uID0gZXZlbnQuZGF0YS5vYmplY3QgYXMgU3RyaXBlLkNoZWNrb3V0LlNlc3Npb247XG4gICAgICBjb25zdCB1c2VySWQgPSBzZXNzaW9uLm1ldGFkYXRhPy51c2VySWQ7XG4gICAgICBjb25zdCBjdXN0b21lcklkID0gc2Vzc2lvbi5jdXN0b21lciBhcyBzdHJpbmc7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIElEIGZyb20gbWV0YWRhdGE6JywgdXNlcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdDdXN0b21lciBJRDonLCBjdXN0b21lcklkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIERldGFpbHM6JywgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbiwgbnVsbCwgMikpO1xuXG4gICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQ1JJVElDQUw6IE5vIHVzZXJJZCBpbiBjaGVja291dCBzZXNzaW9uIG1ldGFkYXRhJyk7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlY2VpdmVkOiB0cnVlLCB3YXJuaW5nOiAnTm8gdXNlcklkIGZvdW5kJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYFxcbvCfk50gVXBkYXRpbmcgdXNlciAke3VzZXJJZH0gdG8gc3Vic2NyaWJlci4uLmApO1xuXG4gICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgcHJvZmlsZSBleGlzdHNcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdQcm9maWxlLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoY2hlY2tFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRVJST1IgRklORElORyBVU0VSOicsIGNoZWNrRXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyIElEIHRoYXQgZmFpbGVkOicsIHVzZXJJZCk7XG5cbiAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYnkgc3RyaXBlX2N1c3RvbWVyX2lkIGFzIGZhbGxiYWNrXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFRyeWluZyB0byBmaW5kIHVzZXIgYnkgc3RyaXBlX2N1c3RvbWVyX2lkLi4uJyk7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogZmFsbGJhY2tQcm9maWxlLCBlcnJvcjogZmFsbGJhY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdzdHJpcGVfY3VzdG9tZXJfaWQnLCBjdXN0b21lcklkKVxuICAgICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgICBpZiAoIWZhbGxiYWNrRXJyb3IgJiYgZmFsbGJhY2tQcm9maWxlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBGb3VuZCB1c2VyIGJ5IGN1c3RvbWVyIElEIScpO1xuICAgICAgICAgIC8vIFVwZGF0ZSB1c2luZyBjdXN0b21lciBJRFxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZERhdGEsIGVycm9yOiB1cGRhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgICAgICByb2xlOiAnc3Vic2NyaWJlcicsXG4gICAgICAgICAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcSgnc3RyaXBlX2N1c3RvbWVyX2lkJywgY3VzdG9tZXJJZClcbiAgICAgICAgICAgIC5zZWxlY3QoKTtcblxuICAgICAgICAgIGlmICh1cGRhdGVFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFVQREFURSBGQUlMRUQ6JywgdXBkYXRlRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ0RhdGFiYXNlIHVwZGF0ZSBmYWlsZWQnLCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgVVNFUiBVUEdSQURFRCBTVUNDRVNTRlVMTFkgKHZpYSBjdXN0b21lciBJRCkhJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgUHJvZmlsZTonLCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkRGF0YSwgbnVsbCwgMikpO1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHJlY2VpdmVkOiB0cnVlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ1VzZXIgbm90IGZvdW5kJywgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coJ+KchSBVc2VyIGZvdW5kOicsIGV4aXN0aW5nUHJvZmlsZS5pZCk7XG5cbiAgICAgIC8vIFVwZ3JhZGUgdXNlciB0byBzdWJzY3JpYmVyXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgIHJvbGU6ICdzdWJzY3JpYmVyJyxcbiAgICAgICAgICBzdWJzY3JpcHRpb25fc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgICBzdHJpcGVfY3VzdG9tZXJfaWQ6IGN1c3RvbWVySWQsXG4gICAgICAgIH0pXG4gICAgICAgIC5lcSgnaWQnLCB1c2VySWQpXG4gICAgICAgIC5zZWxlY3QoKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEQVRBQkFTRSBVUERBVEUgRkFJTEVEOicsIGVycm9yKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgQ29kZTonLCBlcnJvci5jb2RlKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgTWVzc2FnZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgRGV0YWlsczonLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZSgnRGF0YWJhc2UgdXBkYXRlIGZhaWxlZCcsIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgVVNFUiBVUEdSQURFRCBTVUNDRVNTRlVMTFkhJyk7XG4gICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCBQcm9maWxlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKTtcbiAgICAgIGNvbnNvbGUubG9nKGDwn46JIFVzZXIgJHt1c2VySWR9IGlzIG5vdyBhIFNVQlNDUklCRVIhYCk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHN1YnNjcmlwdGlvbiBkZWxldGlvbi9jYW5jZWxsYXRpb25cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJykge1xuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gZXZlbnQuZGF0YS5vYmplY3QgYXMgU3RyaXBlLlN1YnNjcmlwdGlvbjtcbiAgICAgIGNvbnN0IGN1c3RvbWVySWQgPSBzdWJzY3JpcHRpb24uY3VzdG9tZXIgYXMgc3RyaW5nO1xuXG4gICAgICBpZiAoIWN1c3RvbWVySWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTm8gY3VzdG9tZXJJZCBpbiBzdWJzY3JpcHRpb24uZGVsZXRlZCBldmVudCcpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZWNlaXZlZDogdHJ1ZSwgd2FybmluZzogJ05vIGN1c3RvbWVySWQgZm91bmQnIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBEb3duZ3JhZGUgdXNlciB0byBndWVzdFxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICByb2xlOiAnZ3Vlc3QnLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6ICdpbmFjdGl2ZScsXG4gICAgICAgIH0pXG4gICAgICAgIC5lcSgnc3RyaXBlX2N1c3RvbWVyX2lkJywgY3VzdG9tZXJJZCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkb3duZ3JhZGluZyBwcm9maWxlIGFmdGVyIHN1YnNjcmlwdGlvbiBkZWxldGlvbjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKCdEYXRhYmFzZSB1cGRhdGUgZmFpbGVkJywgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coYEN1c3RvbWVyICR7Y3VzdG9tZXJJZH0gZG93bmdyYWRlZCB0byBndWVzdGApO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzdWJzY3JpcHRpb24gdXBkYXRlcyAob3B0aW9uYWwgYnV0IHJlY29tbWVuZGVkKVxuICAgIGlmIChldmVudC50eXBlID09PSAnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLnVwZGF0ZWQnKSB7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuU3Vic2NyaXB0aW9uO1xuICAgICAgY29uc3QgY3VzdG9tZXJJZCA9IHN1YnNjcmlwdGlvbi5jdXN0b21lciBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzdGF0dXMgPSBzdWJzY3JpcHRpb24uc3RhdHVzO1xuXG4gICAgICBsZXQgc3Vic2NyaXB0aW9uU3RhdHVzOiAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgfCAncGFzdF9kdWUnIHwgJ2NhbmNlbGVkJyA9ICdpbmFjdGl2ZSc7XG4gICAgICBsZXQgcm9sZTogJ2d1ZXN0JyB8ICdzdWJzY3JpYmVyJyA9ICdndWVzdCc7XG5cbiAgICAgIC8vIE1hcCBTdHJpcGUgc3RhdHVzIHRvIG91ciBkYXRhYmFzZSBzdGF0dXNcbiAgICAgIGlmIChzdGF0dXMgPT09ICdhY3RpdmUnKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvblN0YXR1cyA9ICdhY3RpdmUnO1xuICAgICAgICByb2xlID0gJ3N1YnNjcmliZXInO1xuICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdwYXN0X2R1ZScpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uU3RhdHVzID0gJ3Bhc3RfZHVlJztcbiAgICAgICAgcm9sZSA9ICdzdWJzY3JpYmVyJzsgLy8gS2VlcCBhY2Nlc3MgZHVyaW5nIGdyYWNlIHBlcmlvZFxuICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09ICdjYW5jZWxlZCcgfHwgc3RhdHVzID09PSAndW5wYWlkJykge1xuICAgICAgICBzdWJzY3JpcHRpb25TdGF0dXMgPSAnY2FuY2VsZWQnO1xuICAgICAgICByb2xlID0gJ2d1ZXN0JztcbiAgICAgIH1cblxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgICAudXBkYXRlKHtcbiAgICAgICAgICByb2xlLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbl9zdGF0dXM6IHN1YnNjcmlwdGlvblN0YXR1cyxcbiAgICAgICAgfSlcbiAgICAgICAgLmVxKCdzdHJpcGVfY3VzdG9tZXJfaWQnLCBjdXN0b21lcklkKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHN1YnNjcmlwdGlvbiBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYEN1c3RvbWVyICR7Y3VzdG9tZXJJZH0gc3Vic2NyaXB0aW9uIHVwZGF0ZWQgdG8gJHtzdGF0dXN9YCk7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICBjb25zb2xlLmVycm9yKCdcXG7inYwgV0VCSE9PSyBIQU5ETElORyBFUlJPUiEnKTtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBNZXNzYWdlOicsIG1lc3NhZ2UpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIFN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Z1bGwgRXJyb3I6JywgSlNPTi5zdHJpbmdpZnkoZXJyb3IsIG51bGwsIDIpKTtcblxuICAgIC8vIFJldHVybiAyMDAgYW55d2F5IHRvIHByZXZlbnQgU3RyaXBlIGZyb20gcmV0cnlpbmcgZmFpbGVkIHdlYmhvb2tzXG4gICAgLy8gTG9nIHRoZSBlcnJvciBmb3IgbWFudWFsIGludGVydmVudGlvblxuICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyBXQVJOSU5HOiBXZWJob29rIGZhaWxlZCBidXQgcmV0dXJuaW5nIDIwMCB0byBwcmV2ZW50IHJldHJpZXMnKTtcbiAgICBjb25zb2xlLmVycm9yKCfwn5SnIE1BTlVBTCBBQ1RJT04gTkVFREVEOiBDaGVjayBsb2dzIGFuZCB1cGRhdGUgdXNlciBtYW51YWxseSBpZiBuZWVkZWQnKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICByZWNlaXZlZDogdHJ1ZSxcbiAgICAgIGVycm9yOiBtZXNzYWdlLFxuICAgICAgcmVxdWlyZXNNYW51YWxJbnRlcnZlbnRpb246IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCc9PT09PT09PT09IOKchSBXRUJIT09LIFBST0NFU1NFRCBTVUNDRVNTRlVMTFkgPT09PT09PT09PVxcbicpO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZWNlaXZlZDogdHJ1ZSB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJTdHJpcGUiLCJzdXBhYmFzZUFkbWluIiwiY29uZmlnIiwiYXBpIiwiYm9keVBhcnNlciIsInByb2Nlc3MiLCJlbnYiLCJTVFJJUEVfU0VDUkVUX0tFWSIsIkVycm9yIiwiU1RSSVBFX1dFQkhPT0tfU0VDUkVUIiwic3RyaXBlIiwiYXBpVmVyc2lvbiIsIlBPU1QiLCJyZXEiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsInRleHQiLCJzaWduYXR1cmUiLCJoZWFkZXJzIiwiZ2V0IiwibGVuZ3RoIiwiZXJyb3IiLCJzdGF0dXMiLCJldmVudCIsIndlYmhvb2tzIiwiY29uc3RydWN0RXZlbnQiLCJlcnIiLCJtZXNzYWdlIiwidHlwZSIsImlkIiwic2Vzc2lvbiIsImRhdGEiLCJvYmplY3QiLCJ1c2VySWQiLCJtZXRhZGF0YSIsImN1c3RvbWVySWQiLCJjdXN0b21lciIsIkpTT04iLCJzdHJpbmdpZnkiLCJqc29uIiwicmVjZWl2ZWQiLCJ3YXJuaW5nIiwiZXhpc3RpbmdQcm9maWxlIiwiY2hlY2tFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImZhbGxiYWNrUHJvZmlsZSIsImZhbGxiYWNrRXJyb3IiLCJ1cGRhdGVkRGF0YSIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicm9sZSIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJzdHJpcGVfY3VzdG9tZXJfaWQiLCJjb2RlIiwic3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uU3RhdHVzIiwic3RhY2siLCJyZXF1aXJlc01hbnVhbEludGVydmVudGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/webhooks/stripe/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseClient: () => (/* binding */ createSupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://apwazitaolmlizdqtxta.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwd2F6aXRhb2xtbGl6ZHF0eHRhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3NTU0ODcsImV4cCI6MjA3OTMzMTQ4N30.hp-3nuh-ntNq_DrXI1iRR1DVcDGdY1hg3mPDmIoBxzI\";\nconst supabaseServiceRoleKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error(\"Supabase environment variables are not configured.\");\n}\n// Standard client (for browser/public use)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n// Admin client (for server-side operations requiring elevated privileges)\n// This should ONLY be used in API routes and server components\nconst supabaseAdmin = supabaseServiceRoleKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceRoleKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n}) : null;\n// Legacy helper for backwards compatibility\nconst createSupabaseClient = (key)=>{\n    const accessKey = key ?? supabaseAnonKey;\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, accessKey);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDtBQUdyRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFDakUsTUFBTUsseUJBQXlCTCxRQUFRQyxHQUFHLENBQUNLLHlCQUF5QjtBQUVwRSxJQUFJLENBQUNQLGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDLE1BQU0sSUFBSUksTUFBTTtBQUNsQjtBQUVBLDJDQUEyQztBQUNwQyxNQUFNQyxXQUFXVixtRUFBWUEsQ0FBV0MsYUFBYUksaUJBQWlCO0FBRTdFLDBFQUEwRTtBQUMxRSwrREFBK0Q7QUFDeEQsTUFBTU0sZ0JBQWdCSix5QkFDekJQLG1FQUFZQSxDQUFXQyxhQUFhTSx3QkFBd0I7SUFDMURLLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixLQUNBLEtBQUs7QUFFVCw0Q0FBNEM7QUFDckMsTUFBTUMsdUJBQXVCLENBQVVDO0lBQzVDLE1BQU1DLFlBQVlELE9BQU9YO0lBQ3pCLE9BQU9MLG1FQUFZQSxDQUFJQyxhQUFhZ0I7QUFDdEMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3V2cGF5bWVudC8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgdHlwZSB7IERhdGFiYXNlIH0gZnJvbSAnQC90eXBlc19kYic7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG5jb25zdCBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XG4gIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBub3QgY29uZmlndXJlZC4nKTtcbn1cblxuLy8gU3RhbmRhcmQgY2xpZW50IChmb3IgYnJvd3Nlci9wdWJsaWMgdXNlKVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50PERhdGFiYXNlPihzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KTtcblxuLy8gQWRtaW4gY2xpZW50IChmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucyByZXF1aXJpbmcgZWxldmF0ZWQgcHJpdmlsZWdlcylcbi8vIFRoaXMgc2hvdWxkIE9OTFkgYmUgdXNlZCBpbiBBUEkgcm91dGVzIGFuZCBzZXJ2ZXIgY29tcG9uZW50c1xuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBzdXBhYmFzZVNlcnZpY2VSb2xlS2V5XG4gID8gY3JlYXRlQ2xpZW50PERhdGFiYXNlPihzdXBhYmFzZVVybCwgc3VwYWJhc2VTZXJ2aWNlUm9sZUtleSwge1xuICAgICAgYXV0aDoge1xuICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KVxuICA6IG51bGw7XG5cbi8vIExlZ2FjeSBoZWxwZXIgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG5leHBvcnQgY29uc3QgY3JlYXRlU3VwYWJhc2VDbGllbnQgPSA8VCA9IGFueT4oa2V5Pzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGFjY2Vzc0tleSA9IGtleSA/PyBzdXBhYmFzZUFub25LZXk7XG4gIHJldHVybiBjcmVhdGVDbGllbnQ8VD4oc3VwYWJhc2VVcmwsIGFjY2Vzc0tleSk7XG59O1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2VTZXJ2aWNlUm9sZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsImtleSIsImFjY2Vzc0tleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/stripe","vendor-chunks/qs","vendor-chunks/object-inspect","vendor-chunks/get-intrinsic","vendor-chunks/side-channel-list","vendor-chunks/side-channel-weakmap","vendor-chunks/has-symbols","vendor-chunks/function-bind","vendor-chunks/side-channel-map","vendor-chunks/side-channel","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/call-bound","vendor-chunks/es-errors","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwebhooks%2Fstripe%2Froute&page=%2Fapi%2Fwebhooks%2Fstripe%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwebhooks%2Fstripe%2Froute.ts&appDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cbeatr%5CDownloads%5Cuvpayment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();